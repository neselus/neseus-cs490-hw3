import { requireAuth } from "../../lib/auth";
import { db } from "../../lib/db";
export const comments = ({
  postId
}) => {
  return db.comment.findMany({
    where: {
      postId
    }
  });
};
export const comment = ({
  id
}) => {
  return db.comment.findUnique({
    where: {
      id
    }
  });
};
export const Comment = {
  post: (_obj, {
    root
  }) => db.comment.findUnique({
    where: {
      id: root.id
    }
  }).post()
};
export const createComment = ({
  input
}) => {
  return db.comment.create({
    data: input
  });
};
export const deleteComment = ({
  id
}) => {
  requireAuth({
    roles: 'moderator'
  });
  return db.comment.delete({
    where: {
      id
    }
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlQXV0aCIsImRiIiwiY29tbWVudHMiLCJwb3N0SWQiLCJjb21tZW50IiwiZmluZE1hbnkiLCJ3aGVyZSIsImlkIiwiZmluZFVuaXF1ZSIsIkNvbW1lbnQiLCJwb3N0IiwiX29iaiIsInJvb3QiLCJjcmVhdGVDb21tZW50IiwiaW5wdXQiLCJjcmVhdGUiLCJkYXRhIiwiZGVsZXRlQ29tbWVudCIsInJvbGVzIiwiZGVsZXRlIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vYXBpL3NyYy9zZXJ2aWNlcy9jb21tZW50cy9jb21tZW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZXF1aXJlQXV0aCB9IGZyb20gJ3NyYy9saWIvYXV0aCdcbmltcG9ydCB7IGRiIH0gZnJvbSAnc3JjL2xpYi9kYidcblxuZXhwb3J0IGNvbnN0IGNvbW1lbnRzID0gKHsgcG9zdElkIH0pID0+IHtcbiAgcmV0dXJuIGRiLmNvbW1lbnQuZmluZE1hbnkoeyB3aGVyZTogeyBwb3N0SWQgfSB9KVxufVxuXG5leHBvcnQgY29uc3QgY29tbWVudCA9ICh7IGlkIH0pID0+IHtcbiAgcmV0dXJuIGRiLmNvbW1lbnQuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQgfSxcbiAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IENvbW1lbnQgPSB7XG4gIHBvc3Q6IChfb2JqLCB7IHJvb3QgfSkgPT5cbiAgICBkYi5jb21tZW50LmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogcm9vdC5pZCB9IH0pLnBvc3QoKSxcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNvbW1lbnQgPSAoeyBpbnB1dCB9KSA9PiB7XG4gIHJldHVybiBkYi5jb21tZW50LmNyZWF0ZSh7XG4gICAgZGF0YTogaW5wdXQsXG4gIH0pXG59XG5cbmV4cG9ydCBjb25zdCBkZWxldGVDb21tZW50ID0gKHsgaWQgfSkgPT4ge1xuICByZXF1aXJlQXV0aCh7IHJvbGVzOiAnbW9kZXJhdG9yJyB9KVxuICByZXR1cm4gZGIuY29tbWVudC5kZWxldGUoe1xuICAgIHdoZXJlOiB7IGlkIH0sXG4gIH0pXG59Il0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxXQUFXO0FBQ3BCLFNBQVNDLEVBQUU7QUFFWCxPQUFPLE1BQU1DLFFBQVEsR0FBR0EsQ0FBQztFQUFFQztBQUFPLENBQUMsS0FBSztFQUN0QyxPQUFPRixFQUFFLENBQUNHLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDO0lBQUVDLEtBQUssRUFBRTtNQUFFSDtJQUFPO0VBQUUsQ0FBQyxDQUFDO0FBQ25ELENBQUM7QUFFRCxPQUFPLE1BQU1DLE9BQU8sR0FBR0EsQ0FBQztFQUFFRztBQUFHLENBQUMsS0FBSztFQUNqQyxPQUFPTixFQUFFLENBQUNHLE9BQU8sQ0FBQ0ksVUFBVSxDQUFDO0lBQzNCRixLQUFLLEVBQUU7TUFBRUM7SUFBRztFQUNkLENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRCxPQUFPLE1BQU1FLE9BQU8sR0FBRztFQUNyQkMsSUFBSSxFQUFFQSxDQUFDQyxJQUFJLEVBQUU7SUFBRUM7RUFBSyxDQUFDLEtBQ25CWCxFQUFFLENBQUNHLE9BQU8sQ0FBQ0ksVUFBVSxDQUFDO0lBQUVGLEtBQUssRUFBRTtNQUFFQyxFQUFFLEVBQUVLLElBQUksQ0FBQ0w7SUFBRztFQUFFLENBQUMsQ0FBQyxDQUFDRyxJQUFJLENBQUM7QUFDM0QsQ0FBQztBQUVELE9BQU8sTUFBTUcsYUFBYSxHQUFHQSxDQUFDO0VBQUVDO0FBQU0sQ0FBQyxLQUFLO0VBQzFDLE9BQU9iLEVBQUUsQ0FBQ0csT0FBTyxDQUFDVyxNQUFNLENBQUM7SUFDdkJDLElBQUksRUFBRUY7RUFDUixDQUFDLENBQUM7QUFDSixDQUFDO0FBRUQsT0FBTyxNQUFNRyxhQUFhLEdBQUdBLENBQUM7RUFBRVY7QUFBRyxDQUFDLEtBQUs7RUFDdkNQLFdBQVcsQ0FBQztJQUFFa0IsS0FBSyxFQUFFO0VBQVksQ0FBQyxDQUFDO0VBQ25DLE9BQU9qQixFQUFFLENBQUNHLE9BQU8sQ0FBQ2UsTUFBTSxDQUFDO0lBQ3ZCYixLQUFLLEVBQUU7TUFBRUM7SUFBRztFQUNkLENBQUMsQ0FBQztBQUNKLENBQUMifQ==